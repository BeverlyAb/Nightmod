<html><body><div class="content"><div class="item"><div class="clj"><div class="c-head">(shape type & options)</div><div class="c-doc"><p>Returns an entity based on <a href='http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html'>ShapeRenderer</a>. You may pass in a type (see <code>shape-type</code>) or an existing <code>shape</code> entity that you want to modify.</p><p>A <code>shape</code> can draw multiple sub-shapes internally, allowing you to create more complicated shapes. If you use <code>assoc</code> to set the overall :x and :y of the <code>shape</code>, each sub-shape's x and y position will be relative to it.</p><pre>
; create a green and red rectangle
&#40;shape :filled
       :set-color &#40;color :green&#41;
       :rect 0 0 10 30
       :set-color &#40;color :red&#41;
       :rect 10 0 10 30&#41;
; create an empty shape, then set it to a green rectangle
&#40;shape &#40;shape :filled&#41;
       :set-color &#40;color :green&#41;
       :rect 0 0 10 30&#41;
; create a green rectangle at 10,10 and rotate it 45 degrees
&#40;assoc &#40;shape :filled
              :set-color &#40;color :green&#41;
              :rect 0 0 10 30&#41;
       :x 10
       :y 10
       :angle 45&#41;
</pre></div></div><div class="c-head">Options</div><div class="java"><div class="j-item"><span class="j-name">:arc</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span>, <span class="j-arg"><span class="j-type">^float</span> start</span>, <span class="j-arg"><span class="j-type">^float</span> angle</span></span><div class="j-doc">Calls {@link #arc(float, float, float, float, float, int)} by estimating the number of segments needed for a smooth arc.</div></div><div class="j-item"><span class="j-name">:arc</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span>, <span class="j-arg"><span class="j-type">^float</span> start</span>, <span class="j-arg"><span class="j-type">^float</span> angle</span>, <span class="j-arg"><span class="j-type">^int</span> segments</span></span></div><div class="j-item"><span class="j-name">:begin</span><span class="j-args"><span class="j-arg"><span class="j-type">^ShapeRenderer.ShapeType</span> type</span></span><div class="j-doc">Starts a new batch of shapes. All shapes within the batch have to have the type specified. E.g. if {@link ShapeType#Point}
 is specified, only call #point().
 
 The call to this method must be paired with a call to {@link #end()}.
 
 In case OpenGL ES 1.x is used, the projection and modelview matrix will be modified.</div></div><div class="j-item"><span class="j-name">:box</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span>, <span class="j-arg"><span class="j-type">^float</span> depth</span></span><div class="j-doc">Draws a cube. The x, y and z coordinate specify the bottom left front corner of the rectangle. The {@link ShapeType} passed
 to begin has to be {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:circle</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span></span><div class="j-doc">Calls {@link #circle(float, float, float, int)} by estimating the number of segments needed for a smooth circle.</div></div><div class="j-item"><span class="j-name">:circle</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span>, <span class="j-arg"><span class="j-type">^int</span> segments</span></span></div><div class="j-item"><span class="j-name">:cone</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span>, <span class="j-arg"><span class="j-type">^float</span> height</span></span><div class="j-doc">Calls {@link #cone(float, float, float, float, float, int)} by estimating the number of segments needed for a smooth
 circular base.</div></div><div class="j-item"><span class="j-name">:cone</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span>, <span class="j-arg"><span class="j-type">^float</span> height</span>, <span class="j-arg"><span class="j-type">^int</span> segments</span></span></div><div class="j-item"><span class="j-name">:curve</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x1</span>, <span class="j-arg"><span class="j-type">^float</span> y1</span>, <span class="j-arg"><span class="j-type">^float</span> cx1</span>, <span class="j-arg"><span class="j-type">^float</span> cy1</span>, <span class="j-arg"><span class="j-type">^float</span> cx2</span>, <span class="j-arg"><span class="j-type">^float</span> cy2</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^int</span> segments</span></span></div><div class="j-item"><span class="j-name">:dispose</span><span class="j-args"></span></div><div class="j-item"><span class="j-name">:ellipse</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span></span><div class="j-doc">Calls {@link #ellipse(float, float, float, float, int)} by estimating the number of segments needed for a smooth ellipse.</div></div><div class="j-item"><span class="j-name">:ellipse</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span>, <span class="j-arg"><span class="j-type">^int</span> segments</span></span></div><div class="j-item"><span class="j-name">:end</span><span class="j-args"></span><div class="j-doc">Finishes the batch of shapes and ensures they get rendered.</div></div><div class="j-item"><span class="j-name">:flush</span><span class="j-args"></span></div><div class="j-item"><span class="j-name">:get-color</span><span class="j-args"></span></div><div class="j-item"><span class="j-name">:get-current-type</span><span class="j-args"></span><div class="j-doc">Returns the current {@link ShapeType} used</div></div><div class="j-item"><span class="j-name">:get-projection-matrix</span><span class="j-args"></span><div class="j-doc">If the matrix is modified, {@link #updateMatrices()} must be called.</div></div><div class="j-item"><span class="j-name">:get-renderer</span><span class="j-args"></span></div><div class="j-item"><span class="j-name">:get-transform-matrix</span><span class="j-args"></span><div class="j-doc">If the matrix is modified, {@link #updateMatrices()} must be called.</div></div><div class="j-item"><span class="j-name">:identity</span><span class="j-args"></span><div class="j-doc">Sets the transformation matrix to identity.</div></div><div class="j-item"><span class="j-name">:line</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^float</span> z2</span></span><div class="j-doc">Draws a line. The {@link ShapeType} passed to begin has to be {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:line</span><span class="j-args"><span class="j-arg"><span class="j-type">^Vector3</span> v0</span>, <span class="j-arg"><span class="j-type">^Vector3</span> v1</span></span><div class="j-doc">Draws a line. The {@link ShapeType} passed to begin has to be {@link ShapeType#Line}. Lazy method that "just" calls the
 "other" method and unpacks the Vector3 for you</div></div><div class="j-item"><span class="j-name">:line</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span></span><div class="j-doc">Draws a line in the x/y plane. The {@link ShapeType} passed to begin has to be {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:line</span><span class="j-args"><span class="j-arg"><span class="j-type">^Vector2</span> v0</span>, <span class="j-arg"><span class="j-type">^Vector2</span> v1</span></span><div class="j-doc">Draws a line. The {@link ShapeType} passed to begin has to be {@link ShapeType#Line}. Lazy method that "just" calls the
 "other" method and unpacks the Vector2 for you</div></div><div class="j-item"><span class="j-name">:line</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^Color</span> c1</span>, <span class="j-arg"><span class="j-type">^Color</span> c2</span></span><div class="j-doc">Draws a line in the x/y plane. The {@link ShapeType} passed to begin has to be {@link ShapeType#Line}. The line is drawn
 with 2 colors interpolated between start & end point.</div></div><div class="j-item"><span class="j-name">:line</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^float</span> z2</span>, <span class="j-arg"><span class="j-type">^Color</span> c1</span>, <span class="j-arg"><span class="j-type">^Color</span> c2</span></span><div class="j-doc">Draws a line. The {@link ShapeType} passed to begin has to be {@link ShapeType#Line}. The line is drawn with 2 colors
 interpolated between start & end point.</div></div><div class="j-item"><span class="j-name">:point</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span></span><div class="j-doc">Draws a point. The {@link ShapeType} passed to begin has to be {@link ShapeType#Point}.</div></div><div class="j-item"><span class="j-name">:polygon</span><span class="j-args"><span class="j-arg"><span class="j-type">^float[]</span> vertices</span></span></div><div class="j-item"><span class="j-name">:polygon</span><span class="j-args"><span class="j-arg"><span class="j-type">^float[]</span> vertices</span>, <span class="j-arg"><span class="j-type">^int</span> offset</span>, <span class="j-arg"><span class="j-type">^int</span> count</span></span><div class="j-doc">Draws a polygon in the x/y plane. The vertices must contain at least 3 points (6 floats x,y). The {@link ShapeType} passed
 to begin has to be {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:polyline</span><span class="j-args"><span class="j-arg"><span class="j-type">^float[]</span> vertices</span></span></div><div class="j-item"><span class="j-name">:polyline</span><span class="j-args"><span class="j-arg"><span class="j-type">^float[]</span> vertices</span>, <span class="j-arg"><span class="j-type">^int</span> offset</span>, <span class="j-arg"><span class="j-type">^int</span> count</span></span><div class="j-doc">Draws a polyline in the x/y plane. The vertices must contain at least 2 points (4 floats x,y). The {@link ShapeType} passed
 to begin has to be {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:rect</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span></span><div class="j-doc">Draws a rectangle in the x/y plane. The x and y coordinate specify the bottom left corner of the rectangle. The
 {@link ShapeType} passed to begin has to be {@link ShapeType#Filled} or {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:rect</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span>, <span class="j-arg"><span class="j-type">^Color</span> col1</span>, <span class="j-arg"><span class="j-type">^Color</span> col2</span>, <span class="j-arg"><span class="j-type">^Color</span> col3</span>, <span class="j-arg"><span class="j-type">^Color</span> col4</span></span><div class="j-doc">Draws a rectangle in the x/y plane. The x and y coordinate specify the bottom left corner of the rectangle. The
 {@link ShapeType} passed to begin has to be {@link ShapeType#Filled} or {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:rect</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span>, <span class="j-arg"><span class="j-type">^float</span> origin-x</span>, <span class="j-arg"><span class="j-type">^float</span> origin-y</span>, <span class="j-arg"><span class="j-type">^float</span> rotation</span></span><div class="j-doc">Draws a rectangle in the x/y plane. The x and y coordinate specify the bottom left corner of the rectangle. The originX and
 originY specify the point about which to rotate the rectangle. The rotation is in degrees. The {@link ShapeType} passed to
 begin has to be {@link ShapeType#Filled} or {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:rect</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> width</span>, <span class="j-arg"><span class="j-type">^float</span> height</span>, <span class="j-arg"><span class="j-type">^float</span> origin-x</span>, <span class="j-arg"><span class="j-type">^float</span> origin-y</span>, <span class="j-arg"><span class="j-type">^float</span> rotation</span>, <span class="j-arg"><span class="j-type">^Color</span> col1</span>, <span class="j-arg"><span class="j-type">^Color</span> col2</span>, <span class="j-arg"><span class="j-type">^Color</span> col3</span>, <span class="j-arg"><span class="j-type">^Color</span> col4</span></span><div class="j-doc">Draws a rectangle in the x/y plane. The x and y coordinate specify the bottom left corner of the rectangle. The originX and
 originY specify the point about which to rotate the rectangle. The rotation is in degrees. The {@link ShapeType} passed to
 begin has to be {@link ShapeType#Filled} or {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:rect-line</span><span class="j-args"><span class="j-arg"><span class="j-type">^Vector2</span> p1</span>, <span class="j-arg"><span class="j-type">^Vector2</span> p2</span>, <span class="j-arg"><span class="j-type">^float</span> width</span></span></div><div class="j-item"><span class="j-name">:rect-line</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x1</span>, <span class="j-arg"><span class="j-type">^float</span> y1</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^float</span> width</span></span><div class="j-doc">Draws a rectangle with one edge centered at x1, y1 and the opposite edge centered at x2, y2.</div></div><div class="j-item"><span class="j-name">:rotate</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> axis-x</span>, <span class="j-arg"><span class="j-type">^float</span> axis-y</span>, <span class="j-arg"><span class="j-type">^float</span> axis-z</span>, <span class="j-arg"><span class="j-type">^float</span> angle</span></span><div class="j-doc">Multiplies the current transformation matrix by a rotation matrix.</div></div><div class="j-item"><span class="j-name">:scale</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> scale-x</span>, <span class="j-arg"><span class="j-type">^float</span> scale-y</span>, <span class="j-arg"><span class="j-type">^float</span> scale-z</span></span><div class="j-doc">Multiplies the current transformation matrix by a scale matrix.</div></div><div class="j-item"><span class="j-name">:set-color</span><span class="j-args"><span class="j-arg"><span class="j-type">^Color</span> color</span></span><div class="j-doc">Sets the {@link Color} to be used by shapes.</div></div><div class="j-item"><span class="j-name">:set-color</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> r</span>, <span class="j-arg"><span class="j-type">^float</span> g</span>, <span class="j-arg"><span class="j-type">^float</span> b</span>, <span class="j-arg"><span class="j-type">^float</span> a</span></span><div class="j-doc">Sets the {@link Color} to be used by shapes.</div></div><div class="j-item"><span class="j-name">:set-projection-matrix</span><span class="j-args"><span class="j-arg"><span class="j-type">^Matrix4</span> matrix</span></span><div class="j-doc">Sets the projection matrix to be used for rendering. Usually this will be set to {@link Camera#combined}.</div></div><div class="j-item"><span class="j-name">:set-transform-matrix</span><span class="j-args"><span class="j-arg"><span class="j-type">^Matrix4</span> matrix</span></span></div><div class="j-item"><span class="j-name">:translate</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> z</span></span><div class="j-doc">Multiplies the current transformation matrix by a translation matrix.</div></div><div class="j-item"><span class="j-name">:triangle</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x1</span>, <span class="j-arg"><span class="j-type">^float</span> y1</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^float</span> x3</span>, <span class="j-arg"><span class="j-type">^float</span> y3</span></span><div class="j-doc">Draws a triangle in x/y plane. The {@link ShapeType} passed to begin has to be {@link ShapeType#Filled} or
 {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:triangle</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x1</span>, <span class="j-arg"><span class="j-type">^float</span> y1</span>, <span class="j-arg"><span class="j-type">^float</span> x2</span>, <span class="j-arg"><span class="j-type">^float</span> y2</span>, <span class="j-arg"><span class="j-type">^float</span> x3</span>, <span class="j-arg"><span class="j-type">^float</span> y3</span>, <span class="j-arg"><span class="j-type">^Color</span> col1</span>, <span class="j-arg"><span class="j-type">^Color</span> col2</span>, <span class="j-arg"><span class="j-type">^Color</span> col3</span></span><div class="j-doc">Draws a triangle in x/y plane with coloured corners. The {@link ShapeType} passed to begin has to be
 {@link ShapeType#Filled} or {@link ShapeType#Line}.</div></div><div class="j-item"><span class="j-name">:update-matrices</span><span class="j-args"></span></div><div class="j-item"><span class="j-name">:x</span><span class="j-args"><span class="j-arg"><span class="j-type">^float</span> x</span>, <span class="j-arg"><span class="j-type">^float</span> y</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span></span><div class="j-doc">Draws two crossed lines.</div></div><div class="j-item"><span class="j-name">:x</span><span class="j-args"><span class="j-arg"><span class="j-type">^Vector2</span> p</span>, <span class="j-arg"><span class="j-type">^float</span> radius</span></span></div></div><div class="c-head">Source</div><div class="c-src"><pre>(defn shape*
  ([]
    (ShapeEntity. (ShapeRenderer.)))
  ([max-vertices]
    (ShapeEntity. (ShapeRenderer. max-vertices))))</pre><pre>(defmacro shape
  [type & options]
  (when (seq (clojure.set/intersection #{:begin :end} (set options)))
    (-> "No need to call :begin or :end, because it's done for you."
        Throwable.
        throw))
  `(let [entity# ~(if (keyword? type)
                    `(assoc (shape*) :type (shape-type ~type))
                    type)
         ^ShapeRenderer object# (u/get-obj entity# :object)]
     (assoc entity# :draw! (fn [] (u/calls! object# ~@options)))))</pre></div></div></div></body></html>